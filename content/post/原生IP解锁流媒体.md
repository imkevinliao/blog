---
title: "原生IP解锁流媒体"
date: 2024-01-28T11:28:37+08:00
draft: false
---
# 序言
记得很早以前，科学上网的需求就是能用Google，再到后来的可以看1080P的Youtube，再到现在追求相对高一些的体验。

因为解锁流媒体的原因，虽然自己有VPS，但还是买了机场，无他，只因为专线+解锁流媒体，体验确实比自己的一般线路要好得多。专线是真的可以体验到最好的速度，
哪怕在晚高峰。

之前一直都是使用勇哥的脚本，自己的 VPS + WARP-GO，完成对流媒体的解锁，可是使用没多久，问题便接踵而至。

1. 一开始使用默认的 IPV4+IPV6 解锁，后来发现，只要有一个没有解锁便无法正常使用，于是选择关闭IPV6，这样只需要保证IPV4解锁就可以了。
2. 由于奈飞对于IP管理非常严格，一旦出现多人使用同一IP地址，就无法解锁流媒体，而脚本用的人多了，自然也就，后面出现WARP获取的IPV4，上一秒解锁，下一秒就不可以。
3. 使用WARP的人越来越多，这也就导致了虽然WARP落地的IP是原生IP，但是同一IP大量使用依旧会被奈飞封禁

# 解锁流媒体
众所周知，IPV4地址早已经用完了，原生IPV4比较难获得。WARP使用过程中，大概是用的人太多了，导致WARP提供的边缘网络节点也被流媒体封禁。

相反的，ChatGPT客户端对于这种似乎毫不在乎，只要套上WARP就可以解锁ChatGPT客户端。在经历了一系列折腾之后，放弃了IPV4解锁奈飞的想法。
毕竟谁也不想在看奈飞的时候突然IPV4被封导致无法观看的情况吧，要想稳定，应该还是高质量的机场。最害怕的是曾经拥有，刚开始使用WARP的时候非常正常，
没有出现过无法观看，一段时间后就开始抽风。

有一天突发奇想，IPV6的地址几乎是无限的，那为什么不使用IPV6呢？这就涉及到了分流，于是便开始查看V2ray是否支持，果不其然看到了，于是进行了一番配置。
一开始还出现了错误，根据错误代码查找是显示域名配置错误，实际上是文件没编辑对，对json文件不熟悉的人建议使用专业点的编辑器，可以提示你错误信息。
json无法注释，所以下面的配置中的注释需要手动删除，此处仅作为提示。修改好V2ray配置文件后，重启V2ray并查看是否成功运行。openai, netflix 走 ipv6。

对于Cloudflare的边缘网络加速，有些人说提高了节点速度，但有些人说极大降低了速度。还有一种说法是对于本身节点回国网络好的，使用Cloudflare会大大降低速度，
而对于一些很烂的节点反而是提速。由于之前使用过一段时间，自己的节点使用Cloudflare后，总的感受就是速度较为稳定，峰值速度下降了，白天时候差异不大，
因为无论使用与否，网速都可以稳定 Youtube 4K，当然不使用时候，峰值更高，白天不使用效果更好。晚上时候使用Cloudflare，速度比较稳定，但是峰值不高。

总体来讲Cloudflare对于我的节点来说几乎没有什么实质提升，只能说晚高峰速度平滑了很多。加上对于第三方服务，如果出现异常，还得上服务器检查，让Cloudflare
接管IPV6或许是个不错的选择，奈飞和ChatGPT使用IPV6就好了，一般正常都是IPV4互不影响。

AWS的服务器直接解锁 Amazon Prime Video，就像是微软的云服务器直接解锁 ChatGPT 一样。算是个额外福利吧。

使用流媒体解锁检测脚本IPV6地址是否解锁流媒体，不过需要注意的是，检测结果显示没有解锁 ChatGPT，但实际是解锁的。
# 小结
正是因为WARP的脚本广泛使用，导致滥用严重，为了更好的体验，必须得自己动手操作，去获得更好的网络体验。

# 配置文件
```json
{
  "inbounds": [
    {
      "port": 16823,
      "protocol": "vmess",    
      "settings": {
        "clients": [
          {
            "id": "b831381d-6324-4d53-ad4f-8cda48b30811",  
            "alterId": 64
          }
        ]
      },
      "sniffing": {
        "enabled": true, //一定要开启 sniffing，V2Ray 才能识别 Netflix 的流量
        "destOverride": ["http", "tls"]
      }
    }
  ],
  "outbounds": [
    {
      "tag":"IP4_out",
      "protocol": "freedom",
      "settings": {}
    },
    {
      "tag":"IP6_out",
      "protocol": "freedom",
      "settings": {
        "domainStrategy": "UseIPv6" // 指定使用 IPv6
      }
    }
  ],
  "routing": {
    "rules": [
      {
        "type": "field",
        "outboundTag": "IP6_out",
        "domain": ["geosite:netflix","geosite:openai.com"] // netflix 走 IPv6
      },
      {
        "type": "field",
        "outboundTag": "IP4_out",
        "network": "udp,tcp"// 其余走 IPv4
      }
    ]
  }
}
```
